<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Antifurto: Referência do Arquivo main.c</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Gerado por Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Página&nbsp;Principal</a> | <a class="qindex" href="files.html">Lista&nbsp;de&nbsp;Arquivos</a> | <a class="qindex" href="globals.html">Globais</a></div>
<h1>Referência do Arquivo main.c</h1>
<p>
<code>#include "<a class="el" href="main_8h-source.html">main.h</a>"</code><br>

<p>
Gráfico de dependência de inclusões para main.c:<p><center><img src="main_8c__incl.jpg" border="0" usemap="#main.c_map" alt="Include dependency graph"></center>
<map name="main.c_map">
<area href="main_8h.html" shape="rect" coords="15,85,63,106" alt="">
</map>

<p>
<a href="main_8c-source.html">Vá para o código-fonte deste arquivo.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Definições e Macros</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0">ALARME_DESLIGADO</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Estado em que o alarme está desligado e o carro pode funcionar normalmente.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a1">AGUARDANDO_IGNICAO</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Estado em que o alarme está piscando aguardando a ignição para acionar a sirene e o relé.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a2">CONTANDO_TEMPO</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">O tempo selecionado está sendo incrementado.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3">TEMPO_FINALIZADO</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">O tempo acabou, começa a piscar LED de aviso de sirene.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a4">ALARME_DISPARADO</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">O alarme está disparado e somente a chave secreta pode desliga-lo.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a5">SIRENE_AVISO</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A sirene de aviso está tocando e o relé irá bater em alguns segundos.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6">_1_MINUTO</a>&nbsp;&nbsp;&nbsp;60000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Valor de 1 minuto em milissegundos.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a7">BASE_TEMPO_CONTADOR</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Passo de quanto o contador sera incrementado. Deve ser pequeno para permitir leitura dos sensores.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8">TEMPO_INICIO_PISCAGEM</a>&nbsp;&nbsp;&nbsp;5000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tempo antes de disparar o alarme que o LED ira piscar.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a9">TEMPO_SIRENE_AVISO</a>&nbsp;&nbsp;&nbsp;3000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tempo em que a sirene será tocada antes de desligar o motor.  <a href="#a9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Funções</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a15">muda_estado</a> (int8 est_futuro)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Realiza a mudança de estado do sistema. Esta função seta a variável trans que indicará que a mudança de estado ocorreu.  <a href="#a15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a16">zera_contador</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">o contador de tempo de 1 minuto. Esse contador conta intervalos de 1 minuto. Ao zera-lo, está se evitando overflow aos 65535 da variável de 16bits que realiza a contagem. A base de tempo de contagem de tempos maiores é de 1 minuto.  <a href="#a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a17">determina_tempo</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Le a configuracao de JUMPERS e detemina quanto tempo o alarme ira demorar para ligar. <br>
 A seguinte configuração pode ser determinada pelos jumpers: <br>
<ul>
<li>1-ON 2-ON = 1 minuto <br>
</li><li>1-ON 2-OFF = 3 minutos <br>
</li><li>1-OFF 2-ON = 5 minutos <br>
</li><li>1-OFF 2-OFF = 10 minutos. </li></ul>
 <a href="#a17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a18">porta_aberta</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica que a porta esta aberta ou fechado.  <a href="#a18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a19">apertou_chave_secreta</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica se a chave secreta está sendo pressionada.  <a href="#a19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a20">ignicao_acionada</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica se a ignicao está acionada.  <a href="#a20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a21">debug_ativado</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica que o pino de DEBUG está jumpeado.  <a href="#a21"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a22">alarme</a> (int1 onoff)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Desliga ou liga o alarme. Liga o alarme mas somente aciona a sirene se a ignição estiver acionada.  <a href="#a22"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a23">pisca_led</a> (int16 <a class="el" href="main_8c.html#a12">tempo</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pisca o LED baseado na variavel contador, que é incrementada a cada x ms.  <a href="#a23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a24">aciona_tudo</a> (int1 onoff)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Aciona todas as saída do circuito. Essa função é utilizada no DEBUG do alarme.  <a href="#a24"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a25">main</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Função principal do programa.<br>
 Tem as incializações a máquina de estados.  <a href="#a25"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variáveis</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a10">estado</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Guarda o estado da máquina de estados.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a11">cont</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Contador para controlar a base de tempo.  <a href="#a11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a12">tempo</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a13">trans</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica que houve transicao de estado.  <a href="#a13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int1&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a14">piscar_simular_alarme</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indica que deverá piscar o LED dentro do estado aguardando ignicao.  <a href="#a14"></a><br></td></tr>
</table>
<hr><h2>Deinições e macros</h2>
<a class="anchor" name="a6" doxytag="main.c::_1_MINUTO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define _1_MINUTO&nbsp;&nbsp;&nbsp;60000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Valor de 1 minuto em milissegundos. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00040">40</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00072">zera_contador()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="main.c::AGUARDANDO_IGNICAO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AGUARDANDO_IGNICAO&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Estado em que o alarme está piscando aguardando a ignição para acionar a sirene e o relé. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00025">25</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="main.c::ALARME_DESLIGADO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ALARME_DESLIGADO&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Estado em que o alarme está desligado e o carro pode funcionar normalmente. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00022">22</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00150">alarme()</a> e <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="main.c::ALARME_DISPARADO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ALARME_DISPARADO&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
O alarme está disparado e somente a chave secreta pode desliga-lo. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00034">34</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00150">alarme()</a> e <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="main.c::BASE_TEMPO_CONTADOR"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define BASE_TEMPO_CONTADOR&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Passo de quanto o contador sera incrementado. Deve ser pequeno para permitir leitura dos sensores. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00043">43</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="main.c::CONTANDO_TEMPO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CONTANDO_TEMPO&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
O tempo selecionado está sendo incrementado. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00028">28</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="main.c::SIRENE_AVISO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SIRENE_AVISO&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A sirene de aviso está tocando e o relé irá bater em alguns segundos. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00037">37</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="main.c::TEMPO_FINALIZADO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TEMPO_FINALIZADO&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
O tempo acabou, começa a piscar LED de aviso de sirene. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00031">31</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="main.c::TEMPO_INICIO_PISCAGEM"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TEMPO_INICIO_PISCAGEM&nbsp;&nbsp;&nbsp;5000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tempo antes de disparar o alarme que o LED ira piscar. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00046">46</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="main.c::TEMPO_SIRENE_AVISO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TEMPO_SIRENE_AVISO&nbsp;&nbsp;&nbsp;3000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tempo em que a sirene será tocada antes de desligar o motor. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00049">49</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.    </td>
  </tr>
</table>
<hr><h2>Funções</h2>
<a class="anchor" name="a24" doxytag="main.c::aciona_tudo"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void aciona_tudo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int1&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>onoff</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Aciona todas as saída do circuito. Essa função é utilizada no DEBUG do alarme. 
<p>
<dl compact><dt><b>Parâmetros:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>onoff</em>&nbsp;</td><td>Indica se as saídas devem ser ligadas ou desligadas. 1 para ligar e 0 para desligar. </td></tr>
  </table>
</dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00208">208</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00027">LED</a>, <a class="el" href="main_8h-source.html#l00026">RELE</a> e <a class="el" href="main_8h-source.html#l00029">SIRENE</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00208                             {
00209    <span class="keywordflow">if</span>(onoff){
00210                 output_high(SIRENE);
00211                 output_high(LED);
00212                 output_high(RELE);
00213         }
00214         <span class="keywordflow">else</span>{
00215                 output_low(SIRENE);
00216                 output_low(LED);
00217                 output_low(RELE);
00218         }
00219 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="main.c::alarme"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void alarme           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int1&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>onoff</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Desliga ou liga o alarme. Liga o alarme mas somente aciona a sirene se a ignição estiver acionada. 
<p>
<dl compact><dt><b>Parâmetros:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>onoff</em>&nbsp;</td><td>Se for 1, liga o alarme e se for 0 desliga. </td></tr>
  </table>
</dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00150">150</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8c-source.html#l00022">ALARME_DESLIGADO</a>, <a class="el" href="main_8c-source.html#l00034">ALARME_DISPARADO</a>, <a class="el" href="main_8c-source.html#l00129">ignicao_acionada()</a>, <a class="el" href="main_8h-source.html#l00027">LED</a>, <a class="el" href="main_8c-source.html#l00058">muda_estado()</a>, <a class="el" href="main_8h-source.html#l00026">RELE</a> e <a class="el" href="main_8h-source.html#l00029">SIRENE</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00150                         {
00151         <span class="keywordflow">if</span>(onoff==1){
00152                 <a class="code" href="main_8c.html#a15">muda_estado</a>(ALARME_DISPARADO);
00153                 output_low(LED);
00154                 output_high(SIRENE);
00155                 <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a20">ignicao_acionada</a>()){
00156                         output_high(RELE);
00157                 }
00158                 <span class="keywordflow">else</span>{
00159                         output_low(RELE);
00160                 }
00161         }
00162         <span class="keywordflow">else</span>{
00163                 <a class="code" href="main_8c.html#a15">muda_estado</a>(ALARME_DESLIGADO);
00164                 output_high(LED);
00165                 output_low(SIRENE);
00166                 output_low(RELE);
00167         }
00168 }
</pre></div>
<p>
    </td>
  </tr>
</table>

<p>
Este é o grafo de chamadas para esta função:<p><center><img src="main_8c_a22_cgraph.jpg" border="0" usemap="#main_8c_a22_cgraph_map" alt=""></center>
<map name="main_8c_a22_cgraph_map">
<area href="main_8c.html#a20" shape="rect" coords="117,6,227,27" alt="">
<area href="main_8c.html#a15" shape="rect" coords="128,51,216,72" alt="">
</map>
<a class="anchor" name="a19" doxytag="main.c::apertou_chave_secreta"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 apertou_chave_secreta           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica se a chave secreta está sendo pressionada. 
<p>
<dl compact><dt><b>Retorna:</b></dt><dd>1 se a chave está sendo pressionada. </dd></dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00122">122</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00034">CHAVE_SECRETA</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00122                                 {
00123         <span class="keywordflow">return</span> (!input(CHAVE_SECRETA));
00124 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="main.c::debug_ativado"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 debug_ativado           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica que o pino de DEBUG está jumpeado. 
<p>
<dl compact><dt><b>Retorna:</b></dt><dd>1 se o DEBUG estiver ligado. </dd></dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00137">137</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00033">DEBUG</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00137                         {
00138         <span class="keywordflow">return</span> (!input(DEBUG));
00139 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="main.c::determina_tempo"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void determina_tempo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Le a configuracao de JUMPERS e detemina quanto tempo o alarme ira demorar para ligar. <br>
 A seguinte configuração pode ser determinada pelos jumpers: <br>
<ul>
<li>1-ON 2-ON = 1 minuto <br>
</li><li>1-ON 2-OFF = 3 minutos <br>
</li><li>1-OFF 2-ON = 5 minutos <br>
</li><li>1-OFF 2-OFF = 10 minutos. </li></ul>

<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00090">90</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00031">JP1</a>, <a class="el" href="main_8h-source.html#l00032">JP2</a>, <a class="el" href="main_8c-source.html#l00012">tempo</a> e <a class="el" href="main_8c-source.html#l00072">zera_contador()</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00090                           {
00091         <span class="keywordflow">if</span>(!input(JP1)){
00092                 <span class="keywordflow">if</span>(!input(JP2)){
00093                         <a class="code" href="main_8c.html#a12">tempo</a> = 1;
00094                 }
00095                 <span class="keywordflow">else</span>{
00096                         <a class="code" href="main_8c.html#a12">tempo</a> = 3;
00097                 }
00098         }
00099         <span class="keywordflow">else</span>{
00100                 <span class="keywordflow">if</span>(!input(JP2)){
00101                         <a class="code" href="main_8c.html#a12">tempo</a> = 5;
00102                 }
00103                 <span class="keywordflow">else</span>{
00104                         <a class="code" href="main_8c.html#a12">tempo</a> = 10;
00105                 }
00106         }
00107         <a class="code" href="main_8c.html#a16">zera_contador</a>();
00108 }
</pre></div>
<p>
    </td>
  </tr>
</table>

<p>
Este é o grafo de chamadas para esta função:<p><center><img src="main_8c_a17_cgraph.jpg" border="0" usemap="#main_8c_a17_cgraph_map" alt=""></center>
<map name="main_8c_a17_cgraph_map">
<area href="main_8c.html#a16" shape="rect" coords="177,5,271,26" alt="">
</map>
<a class="anchor" name="a20" doxytag="main.c::ignicao_acionada"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 ignicao_acionada           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica se a ignicao está acionada. 
<p>
<dl compact><dt><b>Retorna:</b></dt><dd>1 se a ignicao está acionada. </dd></dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00129">129</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00030">IGNICAO</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00150">alarme()</a> e <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00129                            {
00130         <span class="keywordflow">return</span> (!input(IGNICAO));
00131 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="main.c::main"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void main           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Função principal do programa.<br>
 Tem as incializações a máquina de estados. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00230">230</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8c-source.html#l00208">aciona_tudo()</a>, <a class="el" href="main_8c-source.html#l00150">alarme()</a>, <a class="el" href="main_8c-source.html#l00022">ALARME_DESLIGADO</a>, <a class="el" href="main_8c-source.html#l00034">ALARME_DISPARADO</a>, <a class="el" href="main_8c-source.html#l00122">apertou_chave_secreta()</a>, <a class="el" href="main_8c-source.html#l00043">BASE_TEMPO_CONTADOR</a>, <a class="el" href="main_8c-source.html#l00009">cont</a>, <a class="el" href="main_8c-source.html#l00028">CONTANDO_TEMPO</a>, <a class="el" href="main_8c-source.html#l00137">debug_ativado()</a>, <a class="el" href="main_8c-source.html#l00090">determina_tempo()</a>, <a class="el" href="main_8c-source.html#l00129">ignicao_acionada()</a>, <a class="el" href="main_8h-source.html#l00027">LED</a>, <a class="el" href="main_8c-source.html#l00058">muda_estado()</a>, <a class="el" href="main_8c-source.html#l00178">pisca_led()</a>, <a class="el" href="main_8c-source.html#l00116">porta_aberta()</a>, <a class="el" href="main_8h-source.html#l00029">SIRENE</a>, <a class="el" href="main_8c-source.html#l00037">SIRENE_AVISO</a>, <a class="el" href="main_8c-source.html#l00012">tempo</a>, <a class="el" href="main_8c-source.html#l00031">TEMPO_FINALIZADO</a>, <a class="el" href="main_8c-source.html#l00046">TEMPO_INICIO_PISCAGEM</a>, <a class="el" href="main_8c-source.html#l00015">trans</a> e <a class="el" href="main_8c-source.html#l00072">zera_contador()</a>.<div class="fragment"><pre class="fragment">00230             {
00231    setup_counters(RTCC_INTERNAL,RTCC_DIV_2);
00232 
00233 <span class="preprocessor">        #ifndef PIC_505</span>
00234 <span class="preprocessor"></span>        port_b_pullups(TRUE);
00235 <span class="preprocessor">        #endif</span>
00236 <span class="preprocessor"></span>
00237         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a21">debug_ativado</a>()){
00238                 <span class="keywordflow">while</span>(1){
00239                         <a class="code" href="main_8c.html#a24">aciona_tudo</a>(0);
00240                         <span class="keywordflow">while</span>(<a class="code" href="main_8c.html#a18">porta_aberta</a>()){
00241                            <a class="code" href="main_8c.html#a24">aciona_tudo</a>(1);
00242                         }
00243                         <span class="keywordflow">while</span>(<a class="code" href="main_8c.html#a19">apertou_chave_secreta</a>()){
00244                            <a class="code" href="main_8c.html#a24">aciona_tudo</a>(1);
00245                         }
00246                         <span class="keywordflow">while</span>(<a class="code" href="main_8c.html#a20">ignicao_acionada</a>()){
00247                            <a class="code" href="main_8c.html#a24">aciona_tudo</a>(1);
00248                         }
00249                 }
00250         }
00251 
00252 
00253         <a class="code" href="main_8c.html#a17">determina_tempo</a>();
00254         <a class="code" href="main_8c.html#a15">muda_estado</a>(ALARME_DISPARADO);
00255 
00256         <span class="keywordflow">while</span>(1){
00257 
00258                 restart_wdt();
00259 
00260                 <span class="keywordflow">switch</span>(estado){
00261 
00262                         <span class="keywordflow">case</span> <a class="code" href="main_8c.html#a5">SIRENE_AVISO</a>:
00263                                 <span class="keywordflow">if</span>(trans){
00264                                         <a class="code" href="main_8c.html#a13">trans</a> = 0;
00265                                         <a class="code" href="main_8c.html#a16">zera_contador</a>();
00266                                         <a class="code" href="main_8c.html#a11">cont</a> = TEMPO_SIRENE_AVISO;
00267                                 }
00268                                 <span class="keywordflow">if</span>(cont){
00269                                         output_high(SIRENE);
00270                                         output_low(LED);
00271                                         <a class="code" href="main_8c.html#a11">cont</a> -= BASE_TEMPO_CONTADOR;
00272                                         <span class="comment">//Se acabar o tempo, corta o motor.</span>
00273                                 }
00274                                 <span class="keywordflow">else</span>{
00275                                         <span class="comment">//Liga o alarme e vai para o estado ALARME_DISPARADO</span>
00276                                         <a class="code" href="main_8c.html#a22">alarme</a>(1);
00277                                         <a class="code" href="main_8c.html#a15">muda_estado</a>(ALARME_DISPARADO);
00278                                 }
00279                         <span class="keywordflow">break</span>;
00280 
00281 
00282 
00283                         <span class="comment">//Indica que acabou o tempo e espera a ignicao ser ligada para acionar o alarme.</span>
00284                         <span class="keywordflow">case</span> <a class="code" href="main_8c.html#a4">ALARME_DISPARADO</a>:
00285                                 <a class="code" href="main_8c.html#a22">alarme</a>(1);
00286                         <span class="keywordflow">break</span>;
00287 
00288 
00289                         <span class="comment">//Indica que acabou o tempo e espera a ignicao ser ligada para acionar o alarme.</span>
00290                         <span class="keywordflow">case</span> <a class="code" href="main_8c.html#a3">TEMPO_FINALIZADO</a>:
00291 
00292                                 <a class="code" href="main_8c.html#a11">cont</a>++;
00293                                 <a class="code" href="main_8c.html#a23">pisca_led</a>(500);
00294 
00295                                 <span class="comment">//Se ligar a ignicao, dispara o alarme.</span>
00296                                 <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a20">ignicao_acionada</a>()){
00297                                         <a class="code" href="main_8c.html#a15">muda_estado</a>(SIRENE_AVISO);
00298                                 }
00299 
00300                         <span class="keywordflow">break</span>;
00301 
00302 
00303                         <span class="comment">//Se o alarme estiver desligado e abrir a porta, começa a contar o tempo.</span>
00304                         <span class="keywordflow">case</span> <a class="code" href="main_8c.html#a0">ALARME_DESLIGADO</a>:
00305                                 <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a18">porta_aberta</a>()){
00306                                         output_low(LED);
00307                                         <a class="code" href="main_8c.html#a17">determina_tempo</a>();
00308                                         <a class="code" href="main_8c.html#a15">muda_estado</a>(CONTANDO_TEMPO);
00309                                 }
00310                         <span class="keywordflow">break</span>;
00311 
00312                         <span class="comment">//Indica que esta contando o tempo para disparar o alarme.</span>
00313                         <span class="keywordflow">case</span> <a class="code" href="main_8c.html#a2">CONTANDO_TEMPO</a>:
00314 
00315                                 <span class="comment">//Se acabar o tempo, dispara o alarme.</span>
00316                                 <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a11">cont</a>==0){
00317                                         --tempo;
00318                                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a12">tempo</a>!=0){
00319                                                 <a class="code" href="main_8c.html#a16">zera_contador</a>();
00320                                         }
00321                                         <span class="keywordflow">else</span>{
00322                                                 <a class="code" href="main_8c.html#a15">muda_estado</a>(TEMPO_FINALIZADO);
00323                                         }
00324                                 }
00325                                 <span class="comment">//Se faltar pouco tempo para disparar, pisca o LED de 1 em 1 segundo.</span>
00326                                 <span class="keywordflow">else</span>{
00327                                         <span class="comment">//se estiver nos ultimos x segundos...</span>
00328                                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a11">cont</a>&lt;(<a class="code" href="main_8c.html#a8">TEMPO_INICIO_PISCAGEM</a>/BASE_TEMPO_CONTADOR)){
00329                                                 <span class="comment">// ... do ultimo minuto...</span>
00330                                                 <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a12">tempo</a>==1){
00331                                                         <span class="comment">// .. pisca o LED para avisar que o tempo esta acabando.</span>
00332                                                         <a class="code" href="main_8c.html#a23">pisca_led</a>(1000);
00333                                                 }
00334                                         }
00335                                 }
00336 
00337                                 <span class="keywordflow">if</span>(cont)<a class="code" href="main_8c.html#a11">cont</a>--;
00338 
00339                         <span class="keywordflow">break</span>;
00340 
00341                         <span class="keywordflow">default</span>:
00342                                 <a class="code" href="main_8c.html#a15">muda_estado</a>(ALARME_DISPARADO);
00343                         <span class="keywordflow">break</span>;
00344                 }
00345 
00346 
00347 
00348                 <span class="comment">//Zera tudo se a chave for apertada em qualquer momento.</span>
00349       <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a19">apertou_chave_secreta</a>()){
00350          <a class="code" href="main_8c.html#a22">alarme</a>(0);
00351       }
00352 
00353 
00354                 <span class="comment">//Faz o delay do circuito.</span>
00355                 delay_ms(BASE_TEMPO_CONTADOR);
00356 
00357 
00358         }
00359 }
</pre></div>
<p>
    </td>
  </tr>
</table>

<p>
Este é o grafo de chamadas para esta função:<p><center><img src="main_8c_a25_cgraph.jpg" border="0" usemap="#main_8c_a25_cgraph_map" alt=""></center>
<map name="main_8c_a25_cgraph_map">
<area href="main_8c.html#a24" shape="rect" coords="137,5,217,26" alt="">
<area href="main_8c.html#a22" shape="rect" coords="153,101,201,122" alt="">
<area href="main_8c.html#a20" shape="rect" coords="299,77,408,98" alt="">
<area href="main_8c.html#a15" shape="rect" coords="309,136,397,157" alt="">
<area href="main_8c.html#a19" shape="rect" coords="105,197,249,218" alt="">
<area href="main_8c.html#a21" shape="rect" coords="131,242,224,264" alt="">
<area href="main_8c.html#a17" shape="rect" coords="123,288,232,309" alt="">
<area href="main_8c.html#a16" shape="rect" coords="307,312,400,333" alt="">
<area href="main_8c.html#a23" shape="rect" coords="145,384,209,405" alt="">
<area href="main_8c.html#a18" shape="rect" coords="136,429,219,450" alt="">
</map>
<a class="anchor" name="a15" doxytag="main.c::muda_estado"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void muda_estado           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int8&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>est_futuro</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Realiza a mudança de estado do sistema. Esta função seta a variável trans que indicará que a mudança de estado ocorreu. 
<p>
<dl compact><dt><b>Parâmetros:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>est_futuro</em>&nbsp;</td><td>Estado para o qual o sistema irá ao passar novamente no loop da máquina de estados. </td></tr>
  </table>
</dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00058">58</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8c-source.html#l00006">estado</a> e <a class="el" href="main_8c-source.html#l00015">trans</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00150">alarme()</a> e <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00058                                  {
00059         <a class="code" href="main_8c.html#a13">trans</a> = 1;
00060         <a class="code" href="main_8c.html#a10">estado</a> = est_futuro;
00061 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="main.c::pisca_led"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void pisca_led           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int16&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tempo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pisca o LED baseado na variavel contador, que é incrementada a cada x ms. 
<p>
<dl compact><dt><b>Parâmetros:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tempo</em>&nbsp;</td><td>Intervalo entre cada piscada do LED. O tempo é dividido de maneira a dixar o LED menos tempo acesos quando ele estiver piscando para economizar energia. </td></tr>
  </table>
</dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00178">178</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8c-source.html#l00009">cont</a>, <a class="el" href="main_8h-source.html#l00027">LED</a> e <a class="el" href="main_8c-source.html#l00012">tempo</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00178                            {
00179 
00180         <span class="comment">//Se o tempo nao for dividido por 2, o LED ficara aceso o tempo determinado, e nao piscando.</span>
00181         <a class="code" href="main_8c.html#a12">tempo</a>/=4;
00182 
00183         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a11">cont</a>%(<a class="code" href="main_8c.html#a12">tempo</a>/BASE_TEMPO_CONTADOR)){
00184 
00185                 <a class="code" href="main_8c.html#a12">tempo</a> = <a class="code" href="main_8c.html#a11">cont</a>/(<a class="code" href="main_8c.html#a12">tempo</a>/BASE_TEMPO_CONTADOR);
00186 
00187                 <span class="comment">//Se o modulo der 0, acende o led, caso contrario, deixa apagado (1,2 3).</span>
00188                 <span class="comment">//Assim , o duty cicle será de 1/4.</span>
00189            <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#a12">tempo</a>%4==0){
00190               output_high(LED);
00191            }
00192            <span class="keywordflow">else</span>{
00193               output_low(LED);
00194            }
00195         }
00196 
00197 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="main.c::porta_aberta"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 porta_aberta           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica que a porta esta aberta ou fechado. 
<p>
<dl compact><dt><b>Retorna:</b></dt><dd>1 se a porta está aberta. </dd></dl>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00116">116</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8h-source.html#l00028">SENSOR_PORTA</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00116                        {
00117         <span class="keywordflow">return</span> (!input(SENSOR_PORTA));
00118 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="main.c::zera_contador"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void zera_contador           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
o contador de tempo de 1 minuto. Esse contador conta intervalos de 1 minuto. Ao zera-lo, está se evitando overflow aos 65535 da variável de 16bits que realiza a contagem. A base de tempo de contagem de tempos maiores é de 1 minuto. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00072">72</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referências <a class="el" href="main_8c-source.html#l00040">_1_MINUTO</a> e <a class="el" href="main_8c-source.html#l00009">cont</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00090">determina_tempo()</a> e <a class="el" href="main_8c-source.html#l00230">main()</a>.<div class="fragment"><pre class="fragment">00072                         {
00073         <span class="comment">//O contador conta 1 minuto.</span>
00074         <a class="code" href="main_8c.html#a11">cont</a> =  <a class="code" href="main_8c.html#a6">_1_MINUTO</a> / BASE_TEMPO_CONTADOR;
00075 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variáveis</h2>
<a class="anchor" name="a11" doxytag="main.c::cont"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int16 <a class="el" href="main_8c.html#a11">cont</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Contador para controlar a base de tempo. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00009">9</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a>, <a class="el" href="main_8c-source.html#l00178">pisca_led()</a> e <a class="el" href="main_8c-source.html#l00072">zera_contador()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="main.c::estado"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int8 <a class="el" href="main_8c.html#a10">estado</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Guarda o estado da máquina de estados. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00006">6</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00058">muda_estado()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="main.c::piscar_simular_alarme"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 <a class="el" href="main_8c.html#a14">piscar_simular_alarme</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica que deverá piscar o LED dentro do estado aguardando ignicao. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00018">18</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="main.c::tempo"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int8 <a class="el" href="main_8c.html#a12">tempo</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00012">12</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00090">determina_tempo()</a>, <a class="el" href="main_8c-source.html#l00230">main()</a> e <a class="el" href="main_8c-source.html#l00178">pisca_led()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="main.c::trans"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int1 <a class="el" href="main_8c.html#a13">trans</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indica que houve transicao de estado. 
<p>

<p>
Definição na linha <a class="el" href="main_8c-source.html#l00015">15</a> do arquivo <a class="el" href="main_8c-source.html">main.c</a>.
<p>
Referenciado por <a class="el" href="main_8c-source.html#l00230">main()</a> e <a class="el" href="main_8c-source.html#l00058">muda_estado()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Gerado em Thu Oct 14 22:26:48 2004 para Antifurto por&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
